# 第五章 游戏基础

## 简介

在这一章中，我们将开始介绍游戏本身的逻辑。首先，我们会从游戏玩法的角度来概述整个游戏的结构，接着我们将重点介绍贯穿整个游戏各部分的通用基础内容，例如像素化外观、摄像头，以及物理模拟等。之后，我们将介绍玩家的移动操作，最后，我们将研究垃圾回收以及如何注意到可能的内存泄漏。

## 游戏框架

游戏本身只会被分为 3 个不同的房间：`Stage`、`Console`和`SkillTree`。

`Stage`房间是游戏玩法真正体现的地方（即玩家游玩的场景），它将具有诸如玩家、敌人、弹药、资源、道具等。游戏玩法与 [Bit Blaster XL](http://store.steampowered.com/app/433950/) 非常相似，实际上也相当简单。我之所以选择这种简单的玩法，是因为简单的玩法可以让我更加专注于开发游戏的其他方面（巨大的技能树）。

![1](https://user-images.githubusercontent.com/409773/41510107-e6fdafc6-7234-11e8-91d2-7bc4ab622f57.gif)

`Console`房间是一个类似“菜单”的地方，在这里可以更改视频、音频设置，查看成就，选择要玩的飞船，访问技能树等等。这里模拟了一个终端，而不是采用传统的菜单选项，对于具有“计算机观感”的游戏（也称为“懒惰的程序员艺术” xD）来说，这样做显得更有意义。并且这个创意是你（玩家）只是通过某地的终端设备进行游戏。

![2](https://user-images.githubusercontent.com/409773/41510105-e6aeee2c-7234-11e8-8dd7-5a0b2bb8d159.gif)

`SkillTree`房间是可以获取所有被动技能的地方。在`Stage`房间中你可以获取随机生成的 SP（skill points），或者击杀敌人也可以获得。之后一旦你死亡，你可以使用这些技能点数购买被动技能。这里是想尝试像 [Path of Exile](https://www.pathofexile.com/passive-skill-tree) 中的技能树，并且我认为在这方面确实取得了一定的成功。我构造的技能树有 600 - 800 个节点，我认为这已经足够了。

![3](https://user-images.githubusercontent.com/409773/41510106-e6d9ebb8-7234-11e8-98ae-5d04e210429f.gif)

我将详细地介绍每个房间的创建，包括技能书中的全部技能。不过，我也强烈建议你尽可能地不要照搬我写的这些内容。我在游戏玩法上做出的许多设计几乎都是我个人偏好，你可能会喜欢一些不同的内容。

例如，抛开庞大的技能树，你可能更加喜欢职业系统，该系统允许更加丰富的组合，像 [Tree of Savior]() 那样。因此，你可以跟随教程学习各种被动技能的实现方法，然后利用它们构建属于你自己的职业系统，而不是像我一样构建技能树系统。

上面所说也仅仅只是举个例子，你可以在方方面面按照自己的想法来实现。我编写这些教程并包含丰富的练习的原因之一就是鼓励大家自己参与学习，而不仅仅跟着照做，我认为这样才能更好地学习。因此。只要你有机会做一些不同的内容，请务必尝试一下。

